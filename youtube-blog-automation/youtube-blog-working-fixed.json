{
  "name": "YouTube Blog Final Working - ì´ë¯¸ì»¤í”¼",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "youtube-blog-final-working",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-trigger-final",
      "name": "Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [-592, 1680],
      "webhookId": "youtube-blog-final-working"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "get",
        "pageId": {
          "__rl": true,
          "value": "={{ $json.body.pageId }}",
          "mode": "id"
        }
      },
      "id": "get-notion-page-final",
      "name": "Get Video Info from Notion",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [-384, 1680],
      "credentials": {
        "notionApi": {
          "id": "kCKFfrau35Gf4PvW",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// YouTube URLì—ì„œ video ID ì¶”ì¶œ\\nconst items = $input.all();\\nconst results = [];\\n\\nfor (const item of items) {\\n  try {\\n    // Notion í˜ì´ì§€ì—ì„œ YouTube URL ì¶”ì¶œ\\n    let youtubeUrl = '';\\n    const properties = item.json.properties || {};\\n    \\n    if (properties.URL && properties.URL.url) {\\n      youtubeUrl = properties.URL.url;\\n    } else if (properties.url && properties.url.url) {\\n      youtubeUrl = properties.url.url;\\n    }\\n    \\n    if (!youtubeUrl) {\\n      throw new Error('YouTube URLì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\\n    }\\n    \\n    // YouTube video ID ì¶”ì¶œ\\n    let videoId = '';\\n    const match = youtubeUrl.match(/(?:youtube\\\\.com\\\\/watch\\\\?v=|youtu\\\\.be\\\\/)([^&\\\\n?#]+)/);\\n    if (match && match[1]) {\\n      videoId = match[1];\\n    }\\n    \\n    if (!videoId) {\\n      throw new Error('ìœ íš¨í•œ YouTube video IDë¥¼ ì¶”ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\\n    }\\n    \\n    // ì œëª©ê³¼ ì±„ë„ëª… ì•ˆì „í•˜ê²Œ ì¶”ì¶œ\\n    let title = 'ì œëª© ì—†ìŒ';\\n    if (properties.ì œëª© && properties.ì œëª©.title && properties.ì œëª©.title[0]) {\\n      title = properties.ì œëª©.title[0].plain_text || properties.ì œëª©.title[0].text?.content || 'ì œëª© ì—†ìŒ';\\n    } else if (properties.Name && properties.Name.title && properties.Name.title[0]) {\\n      title = properties.Name.title[0].plain_text || properties.Name.title[0].text?.content || 'ì œëª© ì—†ìŒ';\\n    }\\n    \\n    let channelName = 'ì±„ë„ëª… ì—†ìŒ';\\n    if (properties.ì±„ë„ëª… && properties.ì±„ë„ëª….rich_text && properties.ì±„ë„ëª….rich_text[0]) {\\n      channelName = properties.ì±„ë„ëª….rich_text[0].plain_text || properties.ì±„ë„ëª….rich_text[0].text?.content || 'ì±„ë„ëª… ì—†ìŒ';\\n    }\\n    \\n    results.push({\\n      ...item.json,\\n      videoId: videoId,\\n      youtubeUrl: youtubeUrl,\\n      title: title,\\n      channelName: channelName\\n    });\\n  } catch (error) {\\n    results.push({\\n      ...item.json,\\n      error: error.message,\\n      videoId: null,\\n      youtubeUrl: null,\\n      title: 'ì˜¤ë¥˜',\\n      channelName: 'ì˜¤ë¥˜'\\n    });\\n  }\\n}\\n\\nreturn results;"
      },
      "id": "extract-youtube-info-final",
      "name": "Extract YouTube Info",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-192, 1680]
    },
    {
      "parameters": {
        "youtubeId": "={{ $json.videoId }}",
        "preferCapLang": "ko"
      },
      "id": "get-youtube-transcript-final",
      "name": "Get YouTube Transcript",
      "type": "n8n-nodes-bandi-youtube-transcript.youtubeTranscriptNode",
      "typeVersion": 1,
      "position": [16, 1680]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¹ì‹ ì€ ì´ë¯¸ì»¤í”¼ ëŒ€í‘œ hovooì…ë‹ˆë‹¤.\\n\\n15ë…„ê°„ ì¹´í˜ 4ê°œ ë§¤ì¥ì„ ìš´ì˜í•˜ë©° F&B ë¸Œëœë”© ì „ë¬¸ê°€ë¡œ í™œë™í–ˆìŠµë‹ˆë‹¤.\\në™ì‹œì— AI ìë™í™” ì „ë¬¸ê°€ë¡œì„œ GPTers ì»¤ë®¤ë‹ˆí‹°ì—ì„œ 'AI ê°ì„± ë¸Œëœë”© ì‹œìŠ¤í…œ' ìŠ¤í„°ë””ë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.\\n\\nYouTube ì˜ìƒ ìë§‰ì„ ë°”íƒ•ìœ¼ë¡œ ë‹¹ì‹ ì˜ ê²½í—˜ê³¼ í†µì°°ì´ ë‹´ê¸´ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”.\\n\\n[ì˜ìƒ ì •ë³´]\\nì œëª©: {{ $('Extract YouTube Info').item.json.title }}\\nì±„ë„: {{ $('Extract YouTube Info').item.json.channelName }}\\nURL: {{ $('Extract YouTube Info').item.json.youtubeUrl }}\\nVideo ID: {{ $('Extract YouTube Info').item.json.videoId }}\\n\\n[ìë§‰ ì „ë¬¸]\\n{{ $json.transcript }}\\n\\n[ë‹¹ì‹ ì˜ ë°°ê²½]\\n- ì´ë¯¸ì»¤í”¼ ëŒ€í‘œ, 15ë…„ F&B ìš´ì˜ ê²½í—˜\\n- ì¹´í˜ 4ê°œ ë§¤ì¥ + ë² ì´ì»¤ë¦¬ ìš´ì˜ ì¤‘\\n- AI ìë™í™” ì „ë¬¸ê°€ (n8n ì›Œí¬í”Œë¡œìš° 5ê°œ ìš´ì˜)\\n- GPTers ìŠ¤í„°ë””ì¥, \\\"AI ê°ì„± ë¸Œëœë”© ì‹œìŠ¤í…œ\\\" ìš´ì˜\\n- ìì˜ì—…ì ëŒ€ìƒ AI êµìœ¡ ê°•ì˜\\n- ë„ë©”ì¸: blog.imiwork.com\\n\\n[ì‘ì„± ìŠ¤íƒ€ì¼]\\n1. ì‹¤ë¬´ ê²½í—˜ ê¸°ë°˜ì˜ êµ¬ì²´ì  í†µì°°\\n2. ì˜¤í”„ë¼ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ Ã— AI ìœµí•© ê´€ì \\n3. ìì˜ì—…ì/ì†Œìƒê³µì¸ì„ ìœ„í•œ ì‹¤ìš©ì  ì¡°ì–¸\\n4. 15ë…„ ì¹´í˜ ìš´ì˜ ê²½í—˜ì—ì„œ ë‚˜ì˜¤ëŠ” ê¹Šì´\\n5. ì¹œê·¼í•˜ì§€ë§Œ ì „ë¬¸ì ì¸ ì–´íˆ¬\\n6. ë§ˆí¬ë‹¤ìš´ í˜•ì‹, H1 ì œëª© í•˜ë‚˜, H2/H3 ì†Œì œëª© êµ¬ì¡°í™”\\n7. ìµœì†Œ 2500ì ì´ìƒì˜ ì™„ì „í•œ ê¸€\\n\\n[ê¸€ êµ¬ì¡°]\\n- ë„ì…: \\\"15ë…„ ì¹´í˜ë¥¼ ìš´ì˜í•˜ë©° ëŠë‚€...\\\" ì‹ìœ¼ë¡œ ê²½í—˜ ê¸°ë°˜ ì‹œì‘\\n- ë³¸ë¬¸: ì˜ìƒ ë‚´ìš© + ë³¸ì¸ ê²½í—˜ ìœµí•©\\n- ì‹¤ì „ íŒ: F&B/AI ê´€ì ì—ì„œì˜ êµ¬ì²´ì  ì‹¤í–‰ë²•\\n- ê²°ë¡ : ë…ìì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ì¥ì„ ìœ„í•œ í–‰ë™ ìœ ë„\\n\\nì˜ìƒ ë‚´ìš©ì„ ë‹¨ìˆœ ìš”ì•½í•˜ì§€ ë§ê³ , ë‹¹ì‹ ì˜ 15ë…„ ê²½í—˜ê³¼ AI ì „ë¬¸ì„±ìœ¼ë¡œ ì¬í•´ì„í•´ì„œ ë…ìì—ê²Œ ê°€ì¹˜ ìˆëŠ” í†µì°°ì„ ì œê³µí•˜ëŠ” ì™„ì „í•œ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”.",
        "batching": {}
      },
      "id": "create-article-final",
      "name": "Create Blog Article with Persona",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [240, 1680]
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-001",
        "options": {
          "maxOutputTokens": 4000,
          "temperature": 0.6
        }
      },
      "id": "gemini-article-final",
      "name": "Gemini for Article",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [128, 1904],
      "credentials": {
        "googlePalmApi": {
          "id": "SO4eLSfcE2Z5kkss",
          "name": "hovoo Google Gemini Api account"
        }
      }
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "251d0f53623d8158b023d994a1e58122",
          "mode": "id"
        },
        "title": "={{ $json.title + ' - ì´ë¯¸ì»¤í”¼ ë¸”ë¡œê·¸' }}",
        "simple": false,
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "ì›ë³¸ ì˜ìƒ|url",
              "urlValue": "={{ $json.youtubeUrl }}"
            },
            {
              "key": "ì±„ë„ëª…|rich_text",
              "textContent": "={{ $json.channelName }}"
            },
            {
              "key": "ë³¸ë¬¸|rich_text",
              "textContent": "={{ $json.text.substring(0, 2000) }}"
            },
            {
              "key": "URL ìŠ¬ëŸ¬ê·¸|rich_text",
              "textContent": "=imi-blog-{{ Date.now() }}"
            },
            {
              "key": "íƒœê·¸|multi_select",
              "multiSelectValue": "[ì´ë¯¸ì»¤í”¼, hovoo, YouTube, ë¸”ë¡œê·¸]"
            },
            {
              "key": "ìƒíƒœ|select",
              "selectValue": "ë°œí–‰ì™„ë£Œ"
            },
            {
              "key": "ì‘ì„±ì¼|date",
              "date": "={{ $now }}"
            }
          ]
        },
        "options": {}
      },
      "id": "save-blog-final",
      "name": "Save to Blog DB",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [384, 1680],
      "credentials": {
        "notionApi": {
          "id": "kCKFfrau35Gf4PvW",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Webhook Trigger').item.json.body.chatId || '7830356405' }}",
        "text": "=âœ… **ì´ë¯¸ì»¤í”¼ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ìƒì„± ì™„ë£Œ!**\\n\\nğŸ“ **ì œëª©:** {{ $json.properties.ì œëª©.title[0].plain_text }}\\nğŸ· **íƒœê·¸:** ì´ë¯¸ì»¤í”¼, hovoo, YouTube, ë¸”ë¡œê·¸\\n\\nğŸ’¾ Notion DBì— ì €ì¥ì™„ë£Œ.\\n\\nğŸ¥ **ì›ë³¸ ì˜ìƒ:** {{ $('Extract YouTube Info').item.json.youtubeUrl }}\\nğŸ‘¨â€ğŸ’¼ **ì‘ì„±ì:** hovoo (ì´ë¯¸ì»¤í”¼ ëŒ€í‘œ)",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "Markdown",
          "reply_to_message_id": "={{ $('Webhook Trigger').item.json.body.messageId }}"
        }
      },
      "id": "send-telegram-final",
      "name": "Send Success Message",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [592, 1680],
      "webhookId": "telegram-webhook-final",
      "credentials": {
        "telegramApi": {
          "id": "hIo5i77YKdu9Rs8g",
          "name": "youtube imi Telegram account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\\n  \\\"status\\\": \\\"success\\\",\\n  \\\"message\\\": \\\"ì´ë¯¸ì»¤í”¼ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\\\",\\n  \\\"data\\\": {\\n    \\\"title\\\": \\\"{{ $('Save to Blog DB').item.json.properties.ì œëª©.title[0].plain_text }}\\\",\\n    \\\"videoId\\\": \\\"{{ $('Extract YouTube Info').item.json.videoId }}\\\",\\n    \\\"url\\\": \\\"{{ $('Extract YouTube Info').item.json.youtubeUrl }}\\\",\\n    \\\"created_at\\\": \\\"{{ $now }}\\\",\\n    \\\"webhook_path\\\": \\\"youtube-blog-final-working\\\"\\n  }\\n}",
        "options": {}
      },
      "id": "webhook-response-final",
      "name": "Webhook Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [800, 1680]
    }
  ],
  "connections": {
    "Webhook Trigger": {
      "main": [
        [
          {
            "node": "Get Video Info from Notion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Video Info from Notion": {
      "main": [
        [
          {
            "node": "Extract YouTube Info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract YouTube Info": {
      "main": [
        [
          {
            "node": "Get YouTube Transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get YouTube Transcript": {
      "main": [
        [
          {
            "node": "Create Blog Article with Persona",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Blog Article with Persona": {
      "main": [
        [
          {
            "node": "Save to Blog DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini for Article": {
      "ai_languageModel": [
        [
          {
            "node": "Create Blog Article with Persona",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Save to Blog DB": {
      "main": [
        [
          {
            "node": "Send Success Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Success Message": {
      "main": [
        [
          {
            "node": "Webhook Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "saveManualExecutions": true,
    "saveExecutionProgress": true
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "503b3d8b44115e5921e2e4e1edcde177dde00c303a77361802e2da13d7103e31"
  }
}