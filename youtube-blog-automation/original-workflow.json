{
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "youtube-to-blog",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "ce69223e-9c32-448e-b4a3-c7b3aba27b4f",
      "name": "Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -592,
        1680
      ],
      "webhookId": "youtube-to-blog"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "get",
        "pageId": {
          "__rl": true,
          "value": "={{ $json.body.pageId }}",
          "mode": "id"
        }
      },
      "id": "f276c64b-46f3-4e48-9a8e-6e767c3000d6",
      "name": "Get Video Info from Notion",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        -384,
        1680
      ],
      "credentials": {
        "notionApi": {
          "id": "kCKFfrau35Gf4PvW",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "youtubeId": "={{ $json.URL }}",
        "preferCapLang": "ko"
      },
      "id": "3ddf0959-6f42-4731-ae5f-54f630547983",
      "name": "Get YouTube Transcript",
      "type": "n8n-nodes-bandi-youtube-transcript.youtubeTranscriptNode",
      "typeVersion": 1,
      "position": [
        -192,
        1680
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¹ì‹ ì€ í•œêµ­ì–´ ë¸”ë¡œê·¸ ê¸€ ì‘ì„± ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\nYouTube ì˜ìƒ ìë§‰ì„ ë°”íƒ•ìœ¼ë¡œ ì™„ì „í•œ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”.\n\n[ì˜ìƒ ì •ë³´]\nì œëª©: {{ $('Get Video Info from Notion').item.json.title }}\nì±„ë„: {{ $('Get Video Info from Notion').item.json['ì±„ë„ëª…'] }}\nURL: {{ $('Get Video Info from Notion').item.json.URL }}\n\n[ìë§‰ ì „ë¬¸]\n{{ $json.transcript }}\n\n[ì‘ì„± ìš”êµ¬ì‚¬í•­]\n1. ì˜ìƒ ë‚´ìš©ì„ ë¹ ì§ì—†ì´ ë‹´ì€ ì™„ì „í•œ ê¸€\n2. êµ¬ì²´ì ì¸ ì˜ˆì‹œì™€ ìˆ«ì í¬í•¨\n3. ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ ë¬¸ì²´\n4. H1 ì œëª© í•˜ë‚˜, H2/H3 ì†Œì œëª©ìœ¼ë¡œ êµ¬ì¡°í™”\n5. ìµœì†Œ 2000ì ì´ìƒ\n6. ë§ˆí¬ë‹¤ìš´ í˜•ì‹\n\n[ê¸€ êµ¬ì¡°]\n- ë„ì…: ì£¼ì œ ì†Œê°œì™€ í•µì‹¬ ê°€ì¹˜\n- ë³¸ë¬¸: ì˜ìƒì˜ ì£¼ìš” ë‚´ìš©ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ì „ê°œ\n- ì‹¤ì „ íŒ: êµ¬ì²´ì ì¸ ì‹¤í–‰ ë°©ë²•\n- ê²°ë¡ : í•µì‹¬ ë©”ì‹œì§€ì™€ í–‰ë™ ìœ ë„",
        "batching": {}
      },
      "id": "ea198241-3d4b-4bf1-9a9f-3f682788b752",
      "name": "Create Blog Article1",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        16,
        1680
      ]
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-001",
        "options": {
          "maxOutputTokens": 3000,
          "temperature": 0.5
        }
      },
      "id": "6a7c28ca-b5ad-4f35-af3b-493d12d62ac2",
      "name": "Gemini for Article1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        128,
        1904
      ],
      "credentials": {
        "googlePalmApi": {
          "id": "SO4eLSfcE2Z5kkss",
          "name": "hovoo Google Gemini Api account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¹ì‹ ì€ SEO ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\nì œê³µëœ ë¸”ë¡œê·¸ ê¸€ì„ ìµœì í™”í•˜ê³  ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±í•˜ì„¸ìš”.\n\n[ì›ë³¸ ê¸€]\n{{ $json.text }}\n\n[ì˜ìƒ ì •ë³´]\nì œëª©: {{ $('Get Video Info from Notion').item.json.title }}\nURL: {{ $('Get Video Info from Notion').item.json.URL }}\n\n**ë°˜ë“œì‹œ ì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì¶œë ¥:**\n\n```json\n{\n  \"title\": \"í´ë¦­í•˜ê³  ì‹¶ì€ ë§¤ë ¥ì ì¸ ì œëª© (60ì ì´ë‚´)\",\n  \"body\": \"SEO ìµœì í™”ëœ ë¸”ë¡œê·¸ ë³¸ë¬¸ (ë§ˆí¬ë‹¤ìš´)\",\n  \"slug\": \"url-friendly-slug\",\n  \"tags\": [\"íƒœê·¸1\", \"íƒœê·¸2\", \"íƒœê·¸3\", \"íƒœê·¸4\", \"íƒœê·¸5\"]\n}\n```\n\nìµœì í™” ì›ì¹™:\n- ì œëª©ì€ í˜¸ê¸°ì‹¬ì„ ìê·¹í•˜ë©´ì„œë„ ëª…í™•í•´ì•¼ í•¨\n- ë³¸ë¬¸ ì²« ë‹¨ë½ì— í•µì‹¬ í‚¤ì›Œë“œ í¬í•¨\n- ìŠ¤ìº”í•˜ê¸° ì‰¬ìš´ êµ¬ì¡° (ì§§ì€ ë‹¨ë½, ë¶ˆë¦¿ í¬ì¸íŠ¸)\n- URL ìŠ¬ëŸ¬ê·¸ëŠ” ì˜ë¬¸ ì†Œë¬¸ìì™€ í•˜ì´í”ˆë§Œ ì‚¬ìš©\n- íƒœê·¸ëŠ” 5-7ê°œ",
        "batching": {}
      },
      "id": "5a766d0f-8ec1-4149-a2ec-7ae8480a75cb",
      "name": "SEO Optimization1",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        384,
        1680
      ]
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-001",
        "options": {
          "maxOutputTokens": 3500,
          "temperature": 0.3
        }
      },
      "id": "4bce31bf-7ae3-4c6b-97eb-83c9480ffaca",
      "name": "Gemini for SEO1",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        480,
        1920
      ],
      "credentials": {
        "googlePalmApi": {
          "id": "SO4eLSfcE2Z5kkss",
          "name": "hovoo Google Gemini Api account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// JSON íŒŒì‹±\nconst rawText = $input.first().json.text;\nlet jsonText = rawText;\n\n// JSON ì¶”ì¶œ\nif (rawText.includes('```json')) {\n  const start = rawText.indexOf('```json') + 7;\n  const end = rawText.lastIndexOf('```');\n  jsonText = rawText.substring(start, end).trim();\n}\n\ntry {\n  const data = JSON.parse(jsonText);\n  \n  // ì›ë³¸ ì •ë³´ ì¶”ê°€\n  const notionData = $('Get Video Info from Notion').item.json;\n  \n  return {\n    // ë¸”ë¡œê·¸ ë°ì´í„°\n    title: data.title || notionData.title.substring(0, 60),\n    body: data.body || $('Create Blog Article1').item.json.text,\n    slug: data.slug || 'blog-post',\n    tags: data.tags || ['YouTube', 'ë¸”ë¡œê·¸'],\n    \n    // ì›ë³¸ ì •ë³´\n    video_url: notionData.URL,\n    channel_name: notionData['ì±„ë„ëª…'],\n    original_title: notionData.title,\n    \n    // ë©”íƒ€ ì •ë³´\n    status: 'ì´ˆì•ˆ',\n    created_at: new Date().toISOString()\n  };\n  \n} catch (error) {\n  // íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’\n  const notionData = $('Get Video Info from Notion').item.json;\n  \n  return {\n    title: notionData.title,\n    body: $('Create Blog Article1').item.json.text,\n    slug: 'blog-post-' + Date.now(),\n    tags: ['YouTube', 'ë¸”ë¡œê·¸'],\n    video_url: notionData.URL,\n    channel_name: notionData['ì±„ë„ëª…'],\n    original_title: notionData.title,\n    status: 'ì´ˆì•ˆ',\n    created_at: new Date().toISOString(),\n    error: error.message\n  };\n}"
      },
      "id": "60c46622-fe91-4c58-9ac7-d121c6da692d",
      "name": "Parse JSON",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        768,
        1680
      ]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "251d0f53623d8158b023d994a1e58122",
          "mode": "id"
        },
        "title": "={{ $json.title }}",
        "simple": false,
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "ì›ë³¸ ì˜ìƒ|url",
              "urlValue": "={{ $json.video_url }}"
            },
            {
              "key": "ì±„ë„ëª…|rich_text",
              "textContent": "={{ $json.channel_name }}"
            },
            {
              "key": "ë³¸ë¬¸|rich_text",
              "textContent": "={{ $json.body }}"
            },
            {
              "key": "URL ìŠ¬ëŸ¬ê·¸|rich_text",
              "textContent": "={{ $json.slug }}"
            },
            {
              "key": "íƒœê·¸|multi_select",
              "multiSelectValue": "={{ $json.tags }}"
            },
            {
              "key": "ìƒíƒœ|select",
              "selectValue": "={{ $json.status }}"
            },
            {
              "key": "ì‘ì„±ì¼|date",
              "date": "={{ $now }}"
            }
          ]
        },
        "options": {}
      },
      "id": "a5ec7940-23c3-4e46-a1ae-513ae6af9219",
      "name": "Save to Blog DB",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        960,
        1680
      ],
      "credentials": {
        "notionApi": {
          "id": "kCKFfrau35Gf4PvW",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.body.chatId || '7830356405' }}",
        "text": "=âœ… ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì™„ë£Œ!\n\nğŸ“ ì œëª©: {{ $('Parse JSON').item.json.title }}\nğŸ”— ìŠ¬ëŸ¬ê·¸: {{ $('Parse JSON').item.json.slug }}\nğŸ· íƒœê·¸: {{ $('Parse JSON').item.json.tags.join(', ') }}\n\nğŸ’¾ Notionì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì›ë³¸: {{ $('Parse JSON').item.json.video_url }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "0791db12-14ec-4d3e-90e0-c34a8fb4c831",
      "name": "Send Success Message",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1168,
        1680
      ],
      "webhookId": "telegram-webhook",
      "credentials": {
        "telegramApi": {
          "id": "hIo5i77YKdu9Rs8g",
          "name": "youtube imi Telegram account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "545f7bbf-2c7d-463f-b958-39d6f3d0292e",
      "name": "Webhook Response",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1360,
        1680
      ]
    }
  ],
  "connections": {
    "Webhook Trigger": {
      "main": [
        [
          {
            "node": "Get Video Info from Notion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Video Info from Notion": {
      "main": [
        [
          {
            "node": "Get YouTube Transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get YouTube Transcript": {
      "main": [
        [
          {
            "node": "Create Blog Article1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse JSON": {
      "main": [
        [
          {
            "node": "Save to Blog DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save to Blog DB": {
      "main": [
        [
          {
            "node": "Send Success Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Success Message": {
      "main": [
        [
          {
            "node": "Webhook Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Blog Article1": {
      "main": [
        [
          {
            "node": "SEO Optimization1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini for Article1": {
      "ai_languageModel": [
        [
          {
            "node": "Create Blog Article1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "SEO Optimization1": {
      "main": [
        [
          {
            "node": "Parse JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini for SEO1": {
      "ai_languageModel": [
        [
          {
            "node": "SEO Optimization1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "503b3d8b44115e5921e2e4e1edcde177dde00c303a77361802e2da13d7103e31"
  }
}